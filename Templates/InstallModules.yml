# File: InstallModules.yml

steps:
- powershell: |
    if (-not (Get-Module NVRAppDevOps -ListAvailable)) {
      Write-Host "Installing module NVRAppDevOps"
      Install-Module -Name NVRAppDevOps -RequiredVersion 2.4.0	
    }

    Write-Host "Updating module NVRAppDevOps"
    update-module -Name NVRAppDevOps -Force
    if (-not (Find-Module navcontainerhelper)) {
      Write-Host "Module navcontainerhelper not found in repository"
    } else {
      if (-not (Get-Module navcontainerhelper -ListAvailable)) {
        Write-Host "Installing module navcontainerhelper"  
      }
      Write-Host "Updating module navcontainerhelper"
      update-module -Name navcontainerhelper -Force
    }

  failOnStderr: true
  displayName: 'Install Modules'
